
@startuml
title Bundle Reception Activity Diagram
start

while (config.stop() ?) is (false)
	:Receive <i>message</i> from a node;
	:Parse <i>message</i> to get nodeId and bundle rawData;
	:Create bundle with <i>rawData</i>;
	:Create neighbour with nodeId, address and port;
	:Create bundle container with bundle and neighbour;
	:Serialise and save bundle container to disk;
note right
		Creates a file with
		bundle id as filename.
end note
	:Enqueue bundle container;
endwhile (true)
end

header
	config.stop(): bool
	represents the termination
	of the node execution.
end header

@enduml